
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Javascript API Reference</title>

    <link href="stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

    <script>
      $(function() {
        var toc = $("#toc").tocify({
          selectors: "h1,h2",
          extendPage: false,
          theme: "none",
          smoothScroll: false,
          showEffectSpeed: 0,
          hideEffectSpeed: 180,
          ignoreSelector: ".toc-ignore",
          hashGenerator: 'pretty',
          highlightOffset: 60,
          scrollTo: -2,
          scrollHistory: true,
          hashGenerator: function(text, element) {
            return element[0].getAttribute('id');
          }
        }).data("toc-tocify");
        // Hack to make already open sections to start opened,
        // instead of displaying an ugly animation
        setTimeout(function() {
          toc.setOption("showEffectSpeed", 180);
        },50);
        setupLanguages([
          
            
              
                'javascript',
              
            
          
        ]);
      });
    </script>
  </head>

  <body class="js">
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
      <div id="toc">
      </div>
      
      <ul class="toc-footer">
        
          <li><a href='https://publitas.com'>Publitas.com</a></li>
        
          <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        
      </ul>
      
    </div>
    <div class="page-wrapper">
      <div class="content">
        <h1 id="javascript-api-v1.0">JavaScript API v1.0</h1>

<p>This API can be used to customize some behaviors in the Publitas.com catalog viewer.</p>

<h2 id="getting-started">Getting Started</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">platform</span><span class="p">)</span>
<span class="p">};</span>
</pre>
<p>To access the Publitas.com JavaScript API you need to inject javascript code into the Viewer. This can be achieved using the custom header option in your group settings. The basic usage is shown to the right. Please make sure to wrap it in a <code class="prettyprint">&lt;script&gt;</code> tag when setting it in the header.</p>

<p>The arguments passed to this function are</p>

<ul>
<li><code class="prettyprint">api</code>, an object exposing the API methods</li>
<li><code class="prettyprint">platform</code>, a string specifying the current device category. Can be <em>desktop</em>, <em>tablet</em> or <em>mobile</em></li>
</ul>

<h2 id="targeting-different-devices">Targeting Different Devices</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s2">"desktop"</span><span class="err">:</span>
      <span class="c1">// desktop only customizations here
</span>      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s2">"tablet"</span><span class="err">:</span>
      <span class="c1">// tablet only customizations here
</span>      <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="s2">"mobile"</span><span class="err">:</span>
      <span class="c1">// mobile only customizations here
</span>      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre>
<p>By default, customizations are applied to all device categories. This example shows how you could use the <code class="prettyprint">platform</code> parameter to implement different customizations depending on the device the Viewer is running on.</p>

<h2 id="custom-home-button-action">Custom Home Button Action</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">api</span><span class="p">.</span><span class="nx">setHomeButtonAction</span><span class="p">(</span><span class="s2">"http://your.custom.url"</span><span class="p">);</span>

  <span class="c1">// or
</span>
  <span class="nx">api</span><span class="p">.</span><span class="nx">setHomeButtonAction</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do something here
</span>  <span class="p">});</span>
<span class="p">}</span>
</pre>
<p>Using the <code class="prettyprint">setHomeButtonAction(action)</code> you can specify a custom action when the user clicks the home button in the main menu. <code class="prettyprint">action</code> can be a url string or a function</p>

<h2 id="custom-product-action">Custom Product Action</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">api</span><span class="p">.</span><span class="nx">setProductAction</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">product</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something here
</span>  <span class="p">});</span>
<span class="p">}</span>
</pre>
<p>Using the <code class="prettyprint">setProductAction(action)</code> you can specify a custom action when the user clicks on a product on the Viewer. <code class="prettyprint">action</code> needs to be a function. It will receive the clicked product as an argument. It has the following properties:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Integer</td>
<td>Product id</td>
</tr>
<tr>
<td>hotspotId</td>
<td>Integer</td>
<td>Id of the related hotspot</td>
</tr>
<tr>
<td>title</td>
<td>String</td>
<td>Product title</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Product description</td>
</tr>
<tr>
<td>price</td>
<td>Float</td>
<td>Product price</td>
</tr>
<tr>
<td>webshopIdentifier</td>
<td>String</td>
<td>Product id from the webshop</td>
</tr>
<tr>
<td>webshopUrl</td>
<td>String</td>
<td>Direct link to the product on the webshop</td>
</tr>
<tr>
<td>photos</td>
<td>Array</td>
<td>Array of product photos containing 0 - 6 photos</td>
</tr>
</tbody></table>

<h2 id="custom-product-cta">Custom Product CTA</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">api</span><span class="p">.</span><span class="nx">setProductCtaAction</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">webshopUrl</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something here
</span>  <span class="p">});</span>
<span class="p">}</span>
</pre>
<p>Using the <code class="prettyprint">setProductCtaAction(action)</code> you can specify a custom action when the user clicks the &lsquo;Go To Webshop&rsquo; button (call to action) in the product details view. <code class="prettyprint">action</code> needs to be a function. It will receive the original webshop url as an argument.</p>

<h2 id="custom-link-action">Custom Link Action</h2>
<pre class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">viewerReady</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">api</span><span class="p">,</span> <span class="nx">platform</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">api</span><span class="p">.</span><span class="nx">setLinkAction</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something here
</span>  <span class="p">});</span>
<span class="p">}</span>
</pre>
<p>Using the <code class="prettyprint">setLinkAction(action)</code> you can specify a custom action when the user clicks on an external link in the Viewer. <code class="prettyprint">action</code> needs to be a function. It will receive the original url as an argument.</p>

      </div>
      <div class="dark-box">
        <div id="lang-selector">
          
            
              
                <a href="#" data-language-name="javascript">javascript</a>
              
            
          
        </div>
      </div>
    </div>
  </body>
</html>